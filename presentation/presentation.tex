% explanations http://www.math.umbc.edu/~rouben/beamer/
\documentclass{beamer}

\usepackage{style/beamertheme_amsterdam}
% \renewcommand{\labelitemi}{$\vcenter{\hbox{\tiny$\bullet$}}$}
\beamertemplatenavigationsymbolsempty
\usepackage{natbib}
\usepackage{tikz}
\usepackage{pbox}

\title{Designing an Index for ZooDB}
%\subtitle{}
\author{Jonas Nick \& Bogdan Vancea}
\begin{document}
  \frame{\titlepage}
  \begin{frame}
    \frametitle{Outline}
    \tableofcontents[hideallsubsections]
  \end{frame}

  \begin{section}{What is...?}
    \begin{frame}
      \frametitle{ZooDB}
      \begin{itemize}
        \item an open source object database in Java
        \item JDO standard
        \item 4 times faster than competitor db4o
        \item \url{zoodb.org}
      \end{itemize}

    \end{frame}
    \begin{frame}
      \frametitle{Index}
      \begin{block}{}
        datastructure that allows rapid lookup
      \end{block}
      \begin{itemize}
        \item where indices are used in zoodb
      \end{itemize}
    \end{frame}
    \begin{frame}
      \frametitle{B+ Tree}
      \begin{itemize}
        \item node fills one disk page
        \item inner node contains keys and children pointer, leaves contain keys and values
        \item key unique vs. key-value unique
      \end{itemize}
    \end{frame}
    \begin{frame}
      \frametitle{Example: insert}
    \end{frame}
  \end{section}

  \begin{section}{The new Index Implementation}
    3908 loc + 2665 loc of test
    \begin{frame}
      \frametitle{Goals}
        \begin{itemize}
          \item faster
          \item buffer manager
          \item prefix sharing
        \end{itemize}
    \end{frame}
    \begin{frame}
      \frametitle{Challenges}
        \begin{itemize}
          \item edge cases
          \item runtime dominated by disk access
          \begin{itemize}
            \item change nodes infrequently
            \item fewer nodes is better
          \end{itemize}
          \item only parent to child pointer
          \item determine best when its time to split/redistribute
          \item key unique vs. key-value unique
          \item buffer manager lookup takes time 
          \item prefix-sharing encoding/decoding takes time
          \item prefix-sharing rebalancing takes time
          \item general optimizations
            \begin{itemize}
              \item avoid polymorphism
              \item bit-level operations
            \end{itemize}
        \end{itemize}
    \end{frame}
    \begin{frame}
      \frametitle{Our B+ Tree}
    \end{frame}
    % \begin{frame}
    %   \frametitle{Buffer Manager}
    % \end{frame}
    \begin{frame}
      \frametitle{Prefix Sharing}
    \end{frame}
  \end{section}

  \begin{section}{Benchmarks}
    \begin{frame}
      \frametitle{Fine grained}
        \begin{itemize}
          \item insert, remove, write
          \item duration, number of nodes
          \item prefix-sharing vs. no prefix-sharing
        \end{itemize}
    \end{frame}
    \begin{frame}
      \frametitle{Whole system}
        \begin{itemize}
          \item test harness
          \item partial PolePosition benchmark
          \item StackOverflow
        \end{itemize}
    \end{frame}
  \end{section}

  \begin{frame}
    \frametitle{Summary}
      \begin{itemize}
        \item ...
      \end{itemize}
  \end{frame}

  \begin{frame}
    \frametitle{Outlook}
      \begin{itemize}
        \item ...
      \end{itemize}
  \end{frame}

\end{document}
